<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308919 (es-ES, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="531"/>

<div>
<span><div><div><span style="font-size: 14pt; font-weight: bold;">Observaciones</span></div><div><hr/><div>Todo el servidor fue configurado con PHP 7.1, por lo tanto cualquier paquete que requiera PHP deberá ser compatible con la versión 7.1</div></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">Datos de acceso al servidor</span></div><div><hr/><div><span style="font-weight: bold;">IP Pública: </span>201.99.68.59</div><div><span style="font-weight: bold;">IP Local:</span> 192.168.52.3</div></div><div><br/></div><div>Acceso de NextCloud</div><div><a href="http://201.99.68.59/nextcloud">http://201.99.68.59/nextcloud</a></div><div>Puerto interno:8282</div><div><br/></div><div>Acceso de Document Server OnlyOffice</div><div><a href="http://201.99.68.59/nextcloud">http://201.99.68.5</a>9:8282  </div><div>Puerto interno:80</div><div><br/></div><div>Acceso Mantis BT</div><div><a href="http://localhost:8282/mantis">http://localhost:8282/mantis</a></div><div>Acceso intranet</div><div><a href="http://localhost:8282/mantis">http://192.168.52.3:8282/mantis</a></div><div>Acceso externo</div><div><a href="http://201.99.68.59/nextcloud">http://201.99.68.59</a><a href="http://localhost:8282/mantis">/mantis</a></div><div><br/></div><div><span style="font-weight: bold;">Root</span></div><div>Usuario: root</div><div>Password: 4x9RSNIEnNs3MFqt1KjW</div><div><br/></div><div>Usuario: coreprocesses</div><div>Password: Corepro1</div><div><br/></div><div><span style="font-weight: bold;">Instancia MySQL</span></div><div>usuario: root</div><div>contraseña: CoreproTab1</div><div><br/></div><div><span style="font-weight: bold;">Base de datos NextCloud</span></div><div>Nombre: nextcloud</div><div>Usuario: nc_user</div><div>Contraseña: CoreproNext1</div><div><br/></div><div><span style="font-weight: bold;">NextCloud</span></div><div>Usuario administrador: admin</div><div>Contraseña: CoreproMxTab_1</div><div><br/></div><div><span style="font-weight: bold;">Base de datos Mantis BT</span></div><div>Nombre: mantisdb</div><div>Usuario: mantisuser</div><div>Contraseña: CoreproMantisBt1</div><div><br/></div><div><span style="font-weight: bold;">Mantis BT</span></div><div>Usuario: adminbt</div><div>Contraseña:  CoreproMantisBt1</div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">Instalación y actualización del servidor</span></div><div><hr/></div><div>Instalar Centos con Particionado Automático y la opción Servidor con GUI</div><div><br/></div><div>Para actualizar el sistema operativo favor de seguir la guía:</div><div><a href="https://www.itzgeek.com/how-tos/linux/centos-how-tos/how-to-update-centos-7-07-17-2-to-centos-7-3.html">https://www.itzgeek.com/how-tos/linux/centos-how-tos/how-to-update-centos-7-07-17-2-to-centos-7-3.html</a></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">Instalación de XRDP (el escritorio remoto)</span></div><div><hr/><div>Favor de seguir esta guía:</div></div><div><br/></div><div><a href="https://www.itzgeek.com/how-tos/linux/centos-how-tos/install-xrdp-on-centos-7-rhel-7.html">https://www.itzgeek.com/how-tos/linux/centos-how-tos/install-xrdp-on-centos-7-rhel-7.html</a></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">Instalación de Document Server (OnlyOffice, herramienta para edición de documentos en línea)</span></div><hr/><div><span style="font-weight: bold;">Instalando Dependencias:</span></div><div>curl -sL https://rpm.nodesource.com/setup_6.x | sudo bash -</div><div><br/></div><div><span style="font-weight: bold;">Instalar NodeJS</span></div><div>sudo yum install -y nodejs</div><div><br/></div><div><span style="font-weight: bold;">Instalar gcc-c++</span></div><div>sudo yum install gcc-c++ make</div><div><br/></div><div><span style="font-weight: bold;">Crear el archivo:</span></div><div>sudo gedit /etc/yum.repos.d/nginx.repo</div><div><br/></div><div><span style="font-weight: bold;">Con los siguientes datos:</span></div><div>[nginx]</div><div>name=nginx repo</div><div>baseurl=http://nginx.org/packages/centos/7/$basearch/</div><div>gpgcheck=0</div><div>enabled=1</div><div><br/></div><div><span style="font-weight: bold;">Install NGINX:</span></div><div>sudo yum install nginx</div><div><br/></div><div><span style="font-weight: bold;">Editar el archivo: </span></div><div>sudo gedit /etc/nginx/nginx.conf</div><div><br/></div><div><span style="font-weight: bold;">Debe quedar con la siguiente estructura:</span></div><div>user nginx;</div><div>worker_processes 1;</div><div>error_log /var/log/nginx/error.log warn;</div><div>pid /var/run/nginx.pid;</div><div>events {</div><div>worker_connections 1024;</div><div>}</div><div>http {</div><div>include /etc/nginx/mime.types;</div><div>default_type application/octet-stream;</div><div>log_format main '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '</div><div>'$status $body_bytes_sent &quot;$http_referer&quot; '</div><div>'&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';</div><div>access_log /var/log/nginx/access.log main;</div><div>sendfile on;</div><div>#tcp_nopush on;</div><div>keepalive_timeout 65;</div><div>#gzip on;</div><div>include /etc/nginx/conf.d/*.conf;</div><div>}</div><div><br/></div><div><span style="font-weight: bold;">Installing EPEL repository</span></div><div>sudo yum install epel-release</div><div><br/></div><div><span style="font-weight: bold;">Installing and configuring PostgreSQL</span></div><div>sudo yum install postgresql postgresql-server</div><div><br/></div><div><span style="font-weight: bold;">Initialize the PostgreSQL database</span></div><div>sudo service postgresql initdb </div><div>sudo chkconfig postgresql on</div><div><br/></div><div><span style="font-weight: bold;">Turn on the 'trust' authentication method</span></div><div>Abrir el archivo:</div><div>sudo gedit /var/lib/pgsql/data/pg_hba.conf</div><div><br/></div><div>Adecuar las siguientes líneas</div><div><span style="font-weight: bold;">Find the host all all 127.0.0.1/32 ident string and replace it with the following one:</span></div><div>host all all 127.0.0.1/32 trust</div><div><span style="font-weight: bold;">Then find the host all all ::1/128 ident string and replace it with the following one:</span></div><div>host all all ::1/128 trust</div><div><br/></div><div><span style="font-weight: bold;">Restart the PostgreSQL service:</span></div><div>sudo service postgresql restart</div><div><br/></div><div><span style="font-weight: bold;">Create the PostgreSQL database and user:</span></div><div>cd /tmp</div><div><br/></div><div>sudo -u postgres psql -c &quot;CREATE DATABASE onlyoffice;&quot; </div><div>sudo -u postgres psql -c &quot;CREATE USER onlyoffice WITH password 'onlyofficeCorepro1';&quot; </div><div>sudo -u postgres psql -c &quot;GRANT ALL privileges ON DATABASE onlyoffice TO onlyoffice;&quot;</div><div><br/></div><div><span style="font-weight: bold;">Installing Redis</span></div><div>sudo yum install redis</div><div>sudo service redis start </div><div>sudo systemctl enable redis</div><div><br/></div><div><span style="font-weight: bold;">Installing RabbitMQ</span></div><div>sudo yum install rabbitmq-server</div><div>sudo service rabbitmq-server start</div><div>sudo systemctl enable rabbitmq-server</div><div><br/></div><div><span style="font-weight: bold;">Installing Document Server</span></div><div>sudo yum install http://download.onlyoffice.com/repo/centos/main/noarch/onlyoffice-repo.noarch.rpm</div><div><br/></div><div>sudo yum install onlyoffice-documentserver</div><div><br/></div><div><span style="font-weight: bold;">Run dependent services and enable start of them on boot:</span></div><div>sudo service supervisord start </div><div>sudo systemctl enable supervisord </div><div>sudo service nginx start </div><div>sudo systemctl enable nginx</div><div><br/></div><div>Hasta este punto Document Server se debería ver en localhots (una página que dice que Document Server está en funcionamiento)</div><div><br/></div><div><span style="font-weight: bold;">Run a configuration script</span></div><div>bash documentserver-configure.sh</div><div><br/></div><div>Datos del archivo de configuración  de Document Server</div><div><span style="font-weight: bold;">For PostgreSQL:</span></div><div>Host: localhost</div><div>Database: onlyoffice</div><div>User: onlyoffice</div><div>Password: onlyofficeCorepro1</div><div><span style="font-weight: bold;">For Redis:</span></div><div>Host: localhost</div><div><span style="font-weight: bold;">For RabbitMQ:</span></div><div>Host: localhost</div><div>User: guest</div><div>Password: guest</div><div><br/></div><div><span style="font-weight: bold;">Add a firewall exception</span></div><div>sudo firewall-cmd --zone=public --add-port=80/tcp --permanent </div><div>sudo firewall-cmd --reload</div><div><br/></div><div>Por último verificar que funcion el servidor en el navegador Localhost</div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">Instalación de NextCloud</span></div><div><hr/><div>Basicamente usé está guia, pero con unas modificaciones a la versión de PHP: <a href="https://www.marksei.com/install-nextcloud-13-centos-7/">https://www.marksei.com/install-nextcloud-13-centos-7/</a></div></div><div><br/></div><div><span style="font-weight: bold;">Instalación de PHP versión 7.1</span></div><div>yum install epel-release</div><div>rpm -Uvh <a href="https://mirror.webtatic.com/yum/el7/webtatic-release.rpm">https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</a></div><div>yum install httpd php71w php71w-dom php71w-mbstring php71w-gd php71w-pdo php71w-json php71w-xml php71w-zip php71w-curl php71w-mcrypt php71w-pear setroubleshoot-server bzip2</div><div><br/></div><div><span style="font-weight: bold;">Instalación de MySQL/MariaDB</span></div><div>yum install mariadb-server php71w-mysql</div><div><br/></div><div><span style="font-weight: bold;">Start (and enable at boot) the service:</span></div><div>systemctl start mariadb</div><div>systemctl enable mariadb</div><div><br/></div><div><span style="font-weight: bold;">Next step is to configure the database management system. During the configuration you will be prompted to choose a root password, pick a strong one.</span></div><div>mysql_secure_installation</div><div>   </div><div><span style="font-weight: bold;">Now you need to enter the database (you will be asked the password you just set):</span></div><div>mysql -u root -p</div><div><br/></div><div><span style="font-weight: bold;">Now that you are in create a database:</span></div><div>CREATE DATABASE nextcloud;</div><div><br/></div><div><span style="font-weight: bold;">Now you need to create the user that will be used to connect to the database:</span></div><div>CREATE USER 'nc_user'@'localhost' IDENTIFIED BY 'CoreproNext1';</div><div><br/></div><div><span style="font-weight: bold;">The last step is to grant the privileges to the new user:</span></div><div>GRANT ALL PRIVILEGES ON nextcloud.* TO 'nc_user'@'localhost';</div><div>FLUSH PRIVILEGES;</div><div><br/></div><div><span style="font-weight: bold;">Instalar NextCloud</span></div><div>cd /var/www/html</div><div>curl -o nextcloud-13-latest.tar.bz2 https://download.nextcloud.com/server/releases/latest-13.tar.bz2</div><div>tar -xvjf nextcloud-13-latest.tar.bz2</div><div>mkdir nextcloud/data</div><div>chown -R apache:apache nextcloud</div><div>rm nextcloud-13-latest.tar.bz2</div><div><br/></div><div>Crear el archivo:</div><div>sudo gedit /etc/httpd/conf.d/nextcloud.conf</div><div>Con los siguientes datos:</div><div>Alias /nextcloud &quot;/var/www/html/nextcloud/&quot;</div><div>&lt;Directory /var/www/html/nextcloud/&gt;</div><div>  Options +FollowSymlinks</div><div>  AllowOverride All</div><div>&lt;IfModule mod_dav.c&gt;</div><div>  Dav off</div><div>&lt;/IfModule&gt;</div><div>SetEnv HOME /var/www/html/nextcloud</div><div>SetEnv HTTP_HOME /var/www/html/nextcloud</div><div>&lt;/Directory&gt;</div><div><br/></div><div><span style="font-weight: bold;"> Setting Apache and SELinux</span></div><div>semanage fcontext -a -t httpd_sys_rw_content_t '/var/www/html/nextcloud/data(/.*)?'</div><div>semanage fcontext -a -t httpd_sys_rw_content_t '/var/www/html/nextcloud/config(/.*)?'</div><div>semanage fcontext -a -t httpd_sys_rw_content_t '/var/www/html/nextcloud/apps(/.*)?'</div><div>semanage fcontext -a -t httpd_sys_rw_content_t '/var/www/html/nextcloud/.htaccess'</div><div>semanage fcontext -a -t httpd_sys_rw_content_t '/var/www/html/nextcloud/.user.ini'</div><div>restorecon -Rv '/var/www/html/nextcloud/'</div><div><br/></div><div>setsebool -P httpd_can_network_connect_db 1</div><div><br/></div><div>Cambiar el puerto 80 de Apache</div><div>sudo gedit /etc/httpd/conf/httpd.conf</div><div>Cambiar la línea:</div><div>Listen 80 por</div><div>Listen 8282</div><div><br/></div><div><span style="font-weight: bold;">Agregar la Excepción SELinux (De lo contrario el servicio Apache no se inicia)</span></div><div>semanage permissive -a httpd_t</div><div><br/></div><div>systemctl start httpd</div><div>systemctl enable httpd</div><div><br/></div><div><span style="font-weight: bold;">FirewallD</span></div><div>firewall-cmd --add-service http --permanent</div><div>firewall-cmd --add-service https --permanent</div><div>sudo firewall-cmd --zone=public --add-port=8282/tcp --permanent </div><div>firewall-cmd --reload</div><div><br/></div><div>Por último terminar la instalación de NextCloud  pasando los parametros solicitados por el asistente de instalación</div><div><br/></div><div>Si por alguna razón marca el siguiente error:</div><div><br/></div><div><span style="font-size: 16pt; font-weight: bold;">Some files have not passed the integrity check… CentOS 7/Nextcloud</span></div><div><br/></div><div>Solucionar con los siguientes comando</div><div><br/></div><div>semanage fcontext -a -t httpd_sys_rw_content_t '/var/www/html/nextcloud/3rdparty/aws/aws-sdk-php/src/data/logs'</div><div><br/></div><div>restorecon -Rv '/var/www/html/nextcloud/3rdparty/aws/aws-sdk-php/src/data/logs'</div><div><br/></div><div>systemctl restart httpd.service</div><div><br/></div><div>La solución fue encontrada aquí: <a href="https://help.nextcloud.com/t/some-files-have-not-passed-the-integrity-check-centos-7-nextcloud-12/25206">https://help.nextcloud.com/t/some-files-have-not-passed-the-integrity-check-centos-7-nextcloud-12/25206</a></div><div><br/></div><div><span style="font-weight: bold;">Configuraciones de optimización (mandatorio seguirlas, excepto la que implica una conexión mediante HTTPS, aún no tenemos certificado valido)</span></div><div><br/></div><div><a href="https://docs.nextcloud.com/server/13/admin_manual/configuration_server/server_tuning.html">https://docs.nextcloud.com/server/13/admin_manual/configuration_server/server_tuning.html</a></div><div><br/></div><div>Este paso está descrito en la URL anterior pero para una versión vieja de PHP, para la configuración de la caché realizar los siguientes pasos:</div><div><br/></div><div><span style="font-weight: bold;">Instalar APCu</span></div><div>yum install php71w-pecl-apcu</div><div><br/></div><div><span style="font-weight: bold;">Agregar la siguiente linea de configuración en el archivo:</span></div><div>sudo gedit  /var/www/html/nextcloud/config/config.php</div><div>'memcache.local' =&gt; '\OC\Memcache\APCu',</div><div><br/></div><div>Reiniciar el servidor</div><div>sudo systemctl restart httpd</div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">El OPcache de PHP no está configurado correctamente. </span></div><div>Primero es necesario realizar la instalación de OPCache para PHP 7.1</div><div>yum install php71w-pecl-zendopcache</div><div><br/></div><div><span style="font-weight: bold;">Para un mejor desempeño se recomienda usar las sigueintes configuraciones en el archivo:</span></div><div>sudo gedit /etc/php.d/opcache.ini</div><div><span style="font-weight: bold;">Basicamente asegurarse de estas configuraciones esten en el archivo</span></div><div>opcache.enable=1</div><div>opcache.enable_cli=1</div><div>opcache.interned_strings_buffer=8</div><div>opcache.max_accelerated_files=10000</div><div>opcache.memory_consumption=128</div><div>opcache.save_comments=1</div><div>opcache.revalidate_freq=1</div><div><br/></div><div><span style="font-weight: bold;">Reiniciar el servidor</span></div><div>sudo systemctl restart httpd</div><div><br/></div><div><span style="font-weight: bold;">Configuración de conexión con LDAP</span></div><div><span style="font-weight: bold;">Instalación de paquetes adicionales de PHP para LDAP</span></div><div>yum install php71w-ldap php71w-intl</div><div><br/></div><div><span style="font-weight: bold;">Verifica si la autenticación LDAP está habilitada</span> </div><div>getsebool -a|grep ldap </div><div><br/></div><div><span style="font-weight: bold;">Habilitar la autenticación LDAP</span></div><div>setsebool httpd_can_connect_ldap 1</div><div>systemctl restart httpd</div><div><br/></div><div><span style="font-weight: bold;">CONFIGURACIÓN DE CONEXIÓN A LA AUTENTICACIÓN LDAP DE MANERA PERMANENTE</span></div><div><span style="font-weight: bold;">Verifica si la autenticación LDAP está habilitada </span></div><div>getsebool -a|grep ldap</div><div><span style="font-weight: bold;">Habilitar la autenticación LDAP por medio del comando setsebool.</span></div><div>El comando setsebool activa o desactiva Booleanos, la opción -P es para hacer los cambios persistentes (sin este parámetro, al reiniciar se perderá el cambio) y x es on o 1 para activar, u off o 0 para desactivar.</div><div>Para nuetro caso el comando queda con la siguiente sintaxis: </div><div>setsebool -P httpd_can_connect_ldap 1</div><div><span style="font-weight: bold;">Reiniciar el servicio </span></div><div>systemctl restart httpd</div><div><br/></div><div><span style="font-weight: bold;">Posteriormente habilitar el acceso LDAP desde la configuración de aplicaciones de NextCloud</span></div><div><br/></div><div><span style="font-size: 18pt; font-weight: bold;">Instalación de Aplicaciones</span></div><hr/><div>Habilitar la aplicación LDAP para realizar la configuración con LDAP</div><div><a href="http://localhost:8282/nextcloud/index.php/settings/apps">http://localhost:8282/nextcloud/index.php/settings/apps</a></div><div>Habilitar  LDAP user and group backend</div><div><br/></div><div><span style="font-size: 18pt; font-weight: bold;">Datos de configuración de acceso al LDAP</span></div><hr/><div><span style="font-weight: bold;">Importante:</span> asegurase que el servidor LDAP tenga abierto el puerto 389 para que el servicio LDAP sea accedido desde fuera del equipo</div><div><br/></div><div><span style="font-weight: bold;">Servidor</span></div><div>Servidor: 192.168.52.4 Puerto: 389</div><div>DN del usuario: cn=admin ,dc=coreprocesses,dc=com</div><div>Contraseña: [contraseña del administrador del ldap]</div><div>DN Base: ou=Group,dc=coreprocesses,dc=com</div><div><br/></div><div><span style="font-weight: bold;">Usuarios</span></div><div>Seleccionar de la lista: Solo esta clase de objetos: <span style="font-weight: bold;">person</span></div><div>Todo lo demás por defecto</div><div><br/></div><div><span style="font-weight: bold;">Atributos de inicio de sesión</span></div><div>Marcar la casilla <span style="font-weight: bold;">Usuario LDAP /AD</span></div><div>Todo lo demás por defecto</div><div><br/></div><div><span style="font-weight: bold;">Grupos</span></div><div>Seleccionar de la casilla Solo esta clases de objetos: <span style="font-weight: bold;">organizationalUnit</span></div><div><br/></div><div><span style="font-size: 18pt; font-weight: bold;">Instalación de Plugin OnlyOffice</span></div><hr/><div>Instalar OnlyOffice</div><div><a href="http://localhost:8282/nextcloud/index.php/settings/apps?category=office#">http://localhost:8282/nextcloud/index.php/settings/apps?category=office#</a></div><div>Conigurar el servidor en:</div><div><a href="http://localhost:8282/nextcloud/index.php/settings/admin/onlyoffice">http://localhost:8282/nextcloud/index.php/settings/admin/onlyoffice</a></div><div>La ip del servidor es la IP donde se haya instalador el servidor (Importante colocar la IP o dominio público)</div><div>Verificar la funcionalidad creando un documento</div><div><br/></div><div>Configurar la IP pública en el archivo de configuración:</div><div>sudo gedit /var/www/html/nextcloud/config/config.php</div><div><img src="Guia-CEntos-7-Netcloud-OnlyOffice_files/Image.png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><span style="font-size: 18pt; font-weight: bold;">Instalación de PDFViewer</span></div><hr/><div>Instalar el PDF Viewer desde:</div><div><a href="http://localhost:8282/nextcloud/index.php/settings/apps?category=office#">http://localhost:8282/nextcloud/index.php/settings/apps?category=office#</a></div><div>Basicamente solo se trata de habilitar el visor de PDF</div><div><span style="font-size: 18pt;"><br/></span></div><div><span style="font-size: 18pt; font-weight: bold;">Instalación de Markdown Editor</span></div><hr/><div><a href="http://201.99.68.59/nextcloud/index.php/settings/apps?category=office#">http://201.99.68.59/nextcloud/index.php/settings/apps?category=office#</a></div></div><div>Se trata de un editor compatible con Markdown</div><div><span style="font-size: 18pt;"><br/></span></div><div><span style="font-size: 18pt; font-weight: bold;">Obtener certificado gratuito para HTTPS (No implementado)</span></div><div><a href="https://linuxgnublog.org/es/asegura-tu-sitio-web-nginx-con-lets-encrypt/">https://linuxgnublog.org/es/asegura-tu-sitio-web-nginx-con-lets-encrypt/</a></div><div><br/></div><div><span style="font-size: 18pt; font-weight: bold;">Instalación de MantisBT</span></div><div><a href="https://devops.profitbricks.com/tutorials/how-to-install-mantisbt-on-centos-7/">https://devops.profitbricks.com/tutorials/how-to-install-mantisbt-on-centos-7/</a></div><div><br/></div><div><span style="font-weight: bold;">Lista de comandos personalizados:</span></div><div style="box-sizing: border-box; overflow: auto; font-size: 13px; padding: 15px 20px; margin: 0px 0px 10px; word-break: break-all; overflow-wrap: break-word; background-color: rgb(250, 250, 250); border: none; border-radius: 6px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="box-sizing: border-box; overflow: auto; font-size: 13px; word-break: break-all; overflow-wrap: break-word; background-color: rgb(250, 250, 250); border: none; border-radius: 0px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: pre-wrap; color: rgb(33, 94, 33); font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.42857;">mysql -u root -p</span></div><div>CREATE DATABASE mantisdb;</div><div>CREATE USER 'mantisuser'@'localhost' IDENTIFIED BY 'CoreproMantisBt1';</div><div>GRANT ALL PRIVILEGES ON mantisdb.* TO 'mantisuser'@'localhost' IDENTIFIED BY 'CoreproMantisBt1' WITH GRANT OPTION;</div><div>FLUSH PRIVILEGES;</div><div>exit;</div><div><br/></div><div>wget <a href="https://downloads.sourceforge.net/project/mantisbt/mantis-stable/2.19.0/mantisbt-2.19.0.zip">https://downloads.sourceforge.net/project/mantisbt/mantis-stable/2.19.0/mantisbt-2.19.0.zip</a></div><div><br/></div><div>unzip mantisbt-2.19.0.zip</div><div><br/></div><div>sudo mv mantisbt-2.19.0  /var/www/html/mantis</div><div><br/></div><div>sudo chown -R apache:apache /var/www/html/mantis</div><div><br/></div><div>Referencia para configurar LDAP</div><div><a href="http://migueleonardortiz.com.ar/linux/integrar-mantis-con-ldap-y-creacion-automatica-de-cuentas/850">http://migueleonardortiz.com.ar/linux/integrar-mantis-con-ldap-y-creacion-automatica-de-cuentas/850</a></div><div><br/></div><div>$g_login_method = LDAP;</div><div>$g_ldap_server = '<a href="ldap://192.168.52.4:389';/">ldap://192.168.52.4:389';</a></div><div>$g_ldap_root_dn = 'ou=Group,dc=coreprocesses,dc=com';</div><div>$g_ldap_uid_field = 'uid';</div><div>$g_ldap_realname_field = 'cn';</div><div>$g_ldap_bind_dn = 'cn=admin ,dc=coreprocesses,dc=com';</div><div>$g_ldap_bind_passwd = 'CoreproTab1';</div><div>$g_use_ldap_email = ON;</div><div>$g_use_ldap_realname = ON;</div><div>$g_ldap_protocol_version = 3;</div><div>$g_ldap_follow_referrals = ON;</div><div>$g_ldap_simulation_file_path = '';</div><div>$g_ldap_organization = '';</div><div><br/></div><div>Seguí como referencia este tema:  <a href="https://mantisbt.org/forums/viewtopic.php?t=3491">https://mantisbt.org/forums/viewtopic.php?t=3491</a></div><div>Por defecto la autenticación de Mantis solo permite LDAP o por formulario, por lo tanto hay que realizar la </div><div>siguiente configuración para que se permita ambas autenticaciones:</div><div><br/></div><div>El archivo: core/authentication_api.php for the function auth_does_password_match().</div><div><br/></div><div>Cambiar:</div><div>if ( LDAP == $t_configured_login_method ) { return ldap_authenticate( $p_user_id, $p_test_password ); }</div><div><br/></div><div>Por:</div><div><br/></div><div><span style="font-size: 11.7px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(46, 139, 87); font-family: Monaco, &quot;Andale Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-variant-caps: normal; font-variant-ligatures: normal;">if ( LDAP == $t_configured_login_method ) { if ( ldap_authenticate( $p_user_id, $p_test_password ) ) { return true; } }</span></div><div><br/></div><div> </div><div>Listo.</div><div><br/></div><div>Verificar que se puede autenticar de ambas formas.</div><div><br/></div><div>Procedimiento para resetear una contraseña de usuario:</div><div><br/></div><div>mysql -u root -p</div><div><br/></div><div>use mantisdb</div><div><br/></div><div>UPDATE mantis_user_table SET PASSWORD=MD5('CoreproMantisBt1'), enabled=1, protected=0, access_level=90 WHERE username='adminbt';</div><div><br/></div><div><br/></div><div>Configuración de correo:</div><div><br/></div><div># --- Email Configuration ---</div><div>$g_enable_email_notification    = ON;</div><div>$g_phpMailer_method        = PHPMAILER_METHOD_SMTP; # or PHPMAILER_METHOD_SMTP, PHPMAILER_METHOD_SENDMAIL</div><div>$g_smtp_host            = '<a href="http://mail.coreprocesses.com.mx';/">mail.coreprocesses.com.mx';</a>            # used with PHPMAILER_METHOD_SMTP</div><div>$g_smtp_username        = '<a href="mailto:bot@coreprocesses.com.mx">bot@coreprocesses.com.mx</a>';                    # used with PHPMAILER_METHOD_SMTP</div><div>$g_smtp_password        = 'Corepro1';                    # used with PHPMAILER_METHOD_SMTP</div><div>$g_administrator_email  = '<a href="mailto:luis.martinez@coreprocesses.com.mx">luis.martinez@coreprocesses.com.mx</a>';</div><div>$g_webmaster_email      = '<a href="mailto:luis.martinez@coreprocesses.com.mx">luis.martinez@coreprocesses.com.mx</a>';</div><div>$g_from_name            = 'Mantis Bug Tracker';</div><div>$g_from_email           = '<a href="mailto:bot@coreprocesses.com.mx">bot@coreprocesses.com.mx</a>';    # the &quot;From: &quot; field in emails</div><div>$g_return_path_email    = '<a href="mailto:bot@coreprocesses.com.mx">bot@coreprocesses.com.mx</a>';    # the return address for bounced mail</div><div>$g_email_receive_own    = OFF;</div><div>$g_email_send_using_cronjob = OFF;</div><div><br/></div><div>Verificar instalación de mantis:</div><div><a href="http://localhost:8282/mantis/admin/check/index.php">http://localhost:8282/mantis/admin/check/index.php</a></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 